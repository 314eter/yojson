USE_OCAMLFIND = true
BYTE_ENABLED = true

SOURCES[] =
  type.ml
  write.ml
  read.ml
  yojson.cppo

FILES[] =
  yojson

OCAMLFLAGS = -dtypes
OCAMLPACKS = easy-format biniou

yojson.ml: $(SOURCES)
	cppo yojson.cppo -o yojson.ml

.DEFAULT: yojson.cma yojson.cmxa # test_yojson meow

.PHONY: clean

clean:
        rm -f *.o *.a *.cm* *~ *.annot test_yojson test_yojson.opt \
		meow meow.opt test.bin

OCamlLibrary(yojson, $(FILES))
#OCamlProgram(test_yojson, $(FILES) test_yojson)
#OCamlProgram(meow, $(FILES) meow)
